@page "/join/{LobbyCode}"

@inject NavigationManager Nav

<h3>@StatusMessage</h3>

@code {
	[Parameter]
	public string? LobbyCode { get; set; }

	public string StatusMessage { get; set; } = "Joining lobby...";

	protected override async Task OnParametersSetAsync() {
		if (string.IsNullOrEmpty(LobbyCode)) {
			Nav.NavigateTo("/");
			return;
		}

		// Отправить код на сервер
		var joined = await LobbyService.JoinLobbyAsync(Code);
		if (joined)
			Nav.NavigateTo($"/lobby/{LobbyCode}");
		else
			NavigationManager.NavigateTo("/error");
	}
}
